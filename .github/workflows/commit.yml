name: Conditional Commit

on:
  schedule:
    - cron: '*/1 * * * *'  # Runs every minute

jobs:
  commit:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        ref: main 

    - name: Get current time and random number
      id: set_conditions
      run: |
        # Get UTC hour (0-23) and minute (for debug)
        CURRENT_HOUR=$(date -u +%H)
        CURRENT_MINUTE=$(date -u +%M)
        # Generate random number (1-10)
        RANDOM_NUMBER=$(( $RANDOM % 10 + 1 ))

        # Debug: Print all values
        echo "🕒 UTC Time: $CURRENT_HOUR:$CURRENT_MINUTE"
        echo "🎲 Random Number: $RANDOM_NUMBER"
        echo "🔍 Condition Check: 7am? $([ $CURRENT_HOUR -ge 7 ] && echo "YES" || echo "NO"), Random >6? $([ $RANDOM_NUMBER -gt 6 ] && echo "YES" || echo "NO")"

        # Set output for next steps
        echo "CURRENT_HOUR=$CURRENT_HOUR" >> $GITHUB_ENV
        echo "RANDOM_NUMBER=$RANDOM_NUMBER" >> $GITHUB_ENV
        echo "should_run=$(( $CURRENT_HOUR >= 7 && $RANDOM_NUMBER > 6 ))" >> $GITHUB_OUTPUT

    - name: Decision Log
      run: |
        echo "### DECISION SUMMARY ###"